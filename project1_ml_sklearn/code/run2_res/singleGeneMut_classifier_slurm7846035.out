# Confirm Python version and conda environment
echo "Using Python: $(which python)"
Using Python: /ix/ccdg/storage3/til177/custom_miniconda/envs/hugen_general/bin/python
python -V
Python 3.11.9
echo "Conda env: $CONDA_DEFAULT_ENV"
Conda env: hugen_general

start_time=$(date +%s)

# python singleGeneMut_classifier_run.py -e brca_tcga/data_mrna_seq_v2_rsem.txt -m brca_tcga/data_mutations.txt -p brca_tcga/data_mrna_seq_v2_rsem.txt  -g RYR2  AKAP9 DNAH11 TP53 UTRN HERC2 DNAH2 PIK3CA -o tcga_tcga
python singleGeneMut_classifier_run2.py -e brca_tcga/data_mrna_seq_v2_rsem.txt -m brca_tcga/data_mutations.txt -p brca_tcga/data_mrna_seq_v2_rsem.txt  -g TP53 DNAH2 PIK3CA -o tcga_tcga
==== Loaded /ihome/hpark/til177/GitHub/cobb2060-2026s/Data_cobb2060/proj1/brca_tcga/data_mrna_seq_v2_rsem.txt ====
min key: brca_tcga/data_mrna_seq_v2_rsem.txt min value: 1

=== brca_tcga/data_mrna_seq_v2_rsem.txt ===
Removing 73 duplicate genes
Dropped 0 all-NaN genes
Dropped 0 genes (>50% missing)
Max value before norm: 2066039.16
--Applied log2CPM--
Max value after norm: 16.58
Shape: (20514, 1100)

Common genes: 20514
Merged expression: (20514, 1100)
==== Loaded /ihome/hpark/til177/GitHub/cobb2060-2026s/Data_cobb2060/proj1/brca_tcga/data_mutations.txt ====
dict_keys(['brca_tcga/data_mutations.txt'])
brca_tcga/data_mutations.txt
Merged mutation: (17680, 982)
Common genes: 15194
Common samples: 979
Aligned expression: (15194, 979)
Aligned mutation: (15194, 979)
==== Loaded /ihome/hpark/til177/GitHub/cobb2060-2026s/Data_cobb2060/proj1/brca_tcga/data_mrna_seq_v2_rsem.txt ====
2040897.3818
Removing 9 duplicate columns in test data
Test data shape: (1100, 15154)

=== PIK3CA ===
Features: 15154
After variance filter: 13062 features
Best params: {'C': 0.01, 'l1_ratio': 0.1}
Best AUC: 0.801
Features used: 929

=== TP53 ===
Features: 15154
After variance filter: 13062 features
Best params: {'C': 0.01, 'l1_ratio': 0.3}
Best AUC: 0.923
Features used: 161

=== DNAH2 ===
Features: 15154
After variance filter: 13062 features
Best params: {'C': 0.01, 'l1_ratio': 0.9}
Best AUC: 0.571
Features used: 35

==================================================
Summary:
PIK3CA: AUC=0.801, C=0.01, l1_ratio=0.1, features=929
TP53: AUC=0.923, C=0.01, l1_ratio=0.3, features=161
DNAH2: AUC=0.571, C=0.01, l1_ratio=0.9, features=35

end_time=$(date +%s)
duration=$((end_time - start_time))
echo "Duration: $duration seconds"
Duration: 1209 seconds

